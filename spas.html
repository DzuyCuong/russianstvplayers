<!DOCTYPE html>
<html lang="ru">
<head>
    <meta name="viewport" content="width=device-width">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>Прямой эфир. Телеканал «СПАС»</title>
    <link rel=stylesheet href="//staticmv.mediavitrina.ru/dist/eump-core/v18.10.10/eump.min.css" type="text/css"/>
    <link rel=stylesheet href="//staticmv.mediavitrina.ru/dist/eump-vitrina/v2.6.2/eump-vitrina.min.css" type="text/css"/>
    <link href="//staticmv.mediavitrina.ru/vitrina_assets/v1.0.3/vitrina_preloader_logo.css" rel="stylesheet" type="text/css"/>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000000
        }

        .eump-player {
            position: absolute;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0
        }
    </style>
</head>
<body>
<script>
    window.EUMPAssetsURL = "//staticmv.mediavitrina.ru/dist/eump-core/v18.10.10/";
    window.EUMPConfig = {
        assetsURL: '//staticmv.mediavitrina.ru/dist/eump-core/v18.10.10/',
        plugins: [
            'quality', 'ecto_live', 'com', 'sergeant', 'contextmenu',
            'vitrina_stat', 'buffering_watchdog', 'error_reporting',
            'com_scheduler', 'com_schedule_loader', 'tracking', 'proxytype',
            'epg', 'epg_ui'
        ],
        pluginsOpts: {
            tracking: {
                events_v2: {
                    'ad_request_no_wrapper': [
                        {
                            http_method: 'GET',
                            url: ''
                        }
                    ],
                    'first_play_or_ad': [
                        {
                            http_method: 'GET',
                            url: 'https://tns-counter.ru/e/ec01&cid=vitrina_tv&typ=1&tms=1tv&idc=107&idlc={{VITRINATV_PROGRAMME_ID}}&ver=0&media=СПАС&type={{MEDIASCOPE2021_TYPE}}&fts={{STREAM_TS_MSEC}}&view=1'
                        }
                    ],
                    'pause_start': [
                        {
                            http_method: 'GET',
                            url: 'https://tns-counter.ru/e/ec01&cid=vitrina_tv&typ=1&tms=1tv&idc=107&idlc={{VITRINATV_PROGRAMME_ID}}&ver=0&media=СПАС&type={{MEDIASCOPE2021_TYPE}}&fts={{STREAM_TS_MSEC}}&view=3'
                        }
                    ],
                    'pause_end': [
                        {
                            http_method: 'GET',
                            url: 'https://tns-counter.ru/e/ec01&cid=vitrina_tv&typ=1&tms=1tv&idc=107&idlc={{VITRINATV_PROGRAMME_ID}}&ver=0&media=СПАС&type={{MEDIASCOPE2021_TYPE}}&fts={{STREAM_TS_MSEC}}&view=1'
                        }
                    ],
                    'mediascope2021_heartbeat': [
                        {
                            http_method: 'GET',
                            url: 'https://tns-counter.ru/e/ec01&cid=vitrina_tv&typ=1&tms=1tv&idc=107&idlc={{VITRINATV_PROGRAMME_ID}}&ver=0&media=СПАС&type={{MEDIASCOPE2021_TYPE}}&fts={{MEDIASCOPE2021_STREAM_TS_MSEC}}&view=2'
                        }
                    ],
                    'tvis_request_no_wrapper': [
                        {
                            http_method: 'GET',
                            url: 'https://stat-analytics.mediavitrina.ru/?event=tvis_request_no_wrapper&player_id=13157&vitrina_id=941&player=web&epg_id=37&db=spas&version={{PLAYER_VERSION}}&sid={{SID}}&uid={{UID}}&location={{LOCATION}}&domain={{DOMAIN}}&mode={{MODE}}&event_ts={{EVENT_TS}}&client_timezone_offset={{CLIENT_TIME_ZONE_OFFSET}}&device={{DEVICE_TYPE}}&device_vendor={{DEVICE_VENDOR}}&device_model={{DEVICE_MODEL}}&user_browser={{USER_BROWSER}}&user_browser_ver={{USER_BROWSER_VER}}&user_browser_ver_major={{USER_BROWSER_VER_MAJOR}}&user_browser_ver_minor={{USER_BROWSER_VER_MINOR}}&user_os={{USER_OS_NAME}}&user_os_ver_major={{USER_OS_VER_MAJOR}}&user_os_ver_minor={{USER_OS_VER_MINOR}}&vitrinatv_programme_id={{VITRINATV_PROGRAMME_ID}}'
                        }
                    ],
                    'tvis_creative_start': [
                        {
                            http_method: 'GET',
                            url: 'https://stat-analytics.mediavitrina.ru/?event=tvis_creative_start&player_id=13157&vitrina_id=941&player=web&epg_id=37&db=spas&version={{PLAYER_VERSION}}&sid={{SID}}&uid={{UID}}&location={{LOCATION}}&domain={{DOMAIN}}&mode={{MODE}}&event_ts={{EVENT_TS}}&client_timezone_offset={{CLIENT_TIME_ZONE_OFFSET}}&device={{DEVICE_TYPE}}&device_vendor={{DEVICE_VENDOR}}&device_model={{DEVICE_MODEL}}&user_browser={{USER_BROWSER}}&user_browser_ver={{USER_BROWSER_VER}}&user_browser_ver_major={{USER_BROWSER_VER_MAJOR}}&user_browser_ver_minor={{USER_BROWSER_VER_MINOR}}&user_os={{USER_OS_NAME}}&user_os_ver_major={{USER_OS_VER_MAJOR}}&user_os_ver_minor={{USER_OS_VER_MINOR}}&vitrinatv_programme_id={{VITRINATV_PROGRAMME_ID}}'
                        }
                    ],
                    'tvis_creative_end': [
                        {
                            http_method: 'GET',
                            url: 'https://stat-analytics.mediavitrina.ru/?event=tvis_creative_end&player_id=13157&vitrina_id=941&player=web&epg_id=37&db=spas&version={{PLAYER_VERSION}}&sid={{SID}}&uid={{UID}}&location={{LOCATION}}&domain={{DOMAIN}}&mode={{MODE}}&event_ts={{EVENT_TS}}&client_timezone_offset={{CLIENT_TIME_ZONE_OFFSET}}&device={{DEVICE_TYPE}}&device_vendor={{DEVICE_VENDOR}}&device_model={{DEVICE_MODEL}}&user_browser={{USER_BROWSER}}&user_browser_ver={{USER_BROWSER_VER}}&user_browser_ver_major={{USER_BROWSER_VER_MAJOR}}&user_browser_ver_minor={{USER_BROWSER_VER_MINOR}}&user_os={{USER_OS_NAME}}&user_os_ver_major={{USER_OS_VER_MAJOR}}&user_os_ver_minor={{USER_OS_VER_MINOR}}&vitrinatv_programme_id={{VITRINATV_PROGRAMME_ID}}'
                        }
                    ],
                    'tvis_creative_expanded': [
                        {
                            http_method: 'GET',
                            url: 'https://stat-analytics.mediavitrina.ru/?event=tvis_creative_expanded&player_id=13157&vitrina_id=941&player=web&epg_id=37&db=spas&version={{PLAYER_VERSION}}&sid={{SID}}&uid={{UID}}&location={{LOCATION}}&domain={{DOMAIN}}&mode={{MODE}}&event_ts={{EVENT_TS}}&client_timezone_offset={{CLIENT_TIME_ZONE_OFFSET}}&device={{DEVICE_TYPE}}&device_vendor={{DEVICE_VENDOR}}&device_model={{DEVICE_MODEL}}&user_browser={{USER_BROWSER}}&user_browser_ver={{USER_BROWSER_VER}}&user_browser_ver_major={{USER_BROWSER_VER_MAJOR}}&user_browser_ver_minor={{USER_BROWSER_VER_MINOR}}&user_os={{USER_OS_NAME}}&user_os_ver_major={{USER_OS_VER_MAJOR}}&user_os_ver_minor={{USER_OS_VER_MINOR}}&vitrinatv_programme_id={{VITRINATV_PROGRAMME_ID}}'
                        }
                    ],
                    'tvis_error': [
                        {
                            http_method: 'GET',
                            url: 'https://stat-analytics.mediavitrina.ru/?event=tvis_error&player_id=13157&vitrina_id=941&player=web&epg_id=37&db=spas&version={{PLAYER_VERSION}}&sid={{SID}}&uid={{UID}}&location={{LOCATION}}&domain={{DOMAIN}}&mode={{MODE}}&event_ts={{EVENT_TS}}&client_timezone_offset={{CLIENT_TIME_ZONE_OFFSET}}&device={{DEVICE_TYPE}}&device_vendor={{DEVICE_VENDOR}}&device_model={{DEVICE_MODEL}}&user_browser={{USER_BROWSER}}&user_browser_ver={{USER_BROWSER_VER}}&user_browser_ver_major={{USER_BROWSER_VER_MAJOR}}&user_browser_ver_minor={{USER_BROWSER_VER_MINOR}}&user_os={{USER_OS_NAME}}&user_os_ver_major={{USER_OS_VER_MAJOR}}&user_os_ver_minor={{USER_OS_VER_MINOR}}&vitrinatv_programme_id={{VITRINATV_PROGRAMME_ID}}'
                        }
                    ],
                    'apierror': [
                        {
                            http_method: 'GET',
                            url: 'https://stat-analytics.mediavitrina.ru/?event=apierror&player_id=13157&vitrina_id=941&player=web&epg_id=37&db=spas&version={{PLAYER_VERSION}}&sid={{SID}}&uid={{UID}}&location={{LOCATION}}&domain={{DOMAIN}}&mode={{MODE}}&event_ts={{EVENT_TS}}&client_timezone_offset={{CLIENT_TIME_ZONE_OFFSET}}&device={{DEVICE_TYPE}}&device_vendor={{DEVICE_VENDOR}}&device_model={{DEVICE_MODEL}}&user_browser={{USER_BROWSER}}&user_browser_ver={{USER_BROWSER_VER}}&user_browser_ver_major={{USER_BROWSER_VER_MAJOR}}&user_browser_ver_minor={{USER_BROWSER_VER_MINOR}}&user_os={{USER_OS_NAME}}&user_os_ver_major={{USER_OS_VER_MAJOR}}&user_os_ver_minor={{USER_OS_VER_MINOR}}&error_title={{ERROR_TITLE}}&error_adv={{ERROR_ADV}}&error_id={{ERROR_ID}}&vitrinatv_programme_id={{VITRINATV_PROGRAMME_ID}}'
                        }
                    ],
                },
            },
            ecto_live: {
                defaultTitle: 'Прямой эфир. Телеканал «СПАС»',
                comBlockStartEnabled: false
            },
            com: {
                startPauserollImmediately: true,
                intervals: {all: 20},
                preloadOnQuartile: 3,
                useYandexSdkPlaceholders: true,
            },
            sergeant: {
                preventAutoStartItem: true,
                ignoreOn: {mobile: true},
                labels: {
                    warning: '<p>Уважаемый зритель!</p><p>Похоже, у вас установлено программное обеспечение, которое блокирует показ <nobr>видео-рекламы.</nobr></p><p>При блокировании показа рекламы плеер может работать с ошибками.</p><p>Отключив блокировку рекламы, вы получите возможность смотреть видео в <nobr>высоком качестве!</nobr></p>'
                },
            },
            vitrina_stat: {
                enabled: true,
                user_storage_ident: 'vitrina_uid',
                url: 'https://stat-analytics.mediavitrina.ru/',
                player: 'web',
                db: 'spas',
                epg_id: 37,
                player_id: 13157,
                vitrina_id: 941
            },
            contextmenu: {
                enabled: true
            },
            cast_sender: {
                reciever_namespace:'urn:x-cast:tv.vitrina.caf',
                reciever_application_id: '2441E3B4',
                receiver_config_url: ''
            },
            com_schedule_loader: {
                adscheduleUrl: 'https://static-api.mediavitrina.ru/v1/epg/spas/ad-injections.json',
                adscheduleIntervalSec: 5
            },
            com_scheduler: {
                seekToLiveAfterMidrolls: true
            },
            quality: {
                labels: {'FHD': 'Full HD', 'HD': 'HD', 'HQ': 'High', 'SD': 'Middle', 'LQ': 'Low'},
                stickers: {'FHD': 'HD'},
                qualityOrder: ['FHD', 'HD', 'HQ', 'SD', 'LQ']
            },
            proxytype: {
                whoami_url: 'https://proxytype.mediavitrina.ru/api/v1/whoami'
            },
            epg: {
                epg_url: 'https://static-api.mediavitrina.ru/v1/epg/spas/lite_web.json'
            },
            epg_ui: {
                titleTemplate: '{{title}}',
            },
        },
    };
</script>
<div class="eump-player eump-ratio-16x9" id="player"></div>
<script src="//staticmv.mediavitrina.ru/dist/eump-core/v18.10.10/eump.all.min.js"></script>
<script src="//staticmv.mediavitrina.ru/dist/eump-vitrina/v2.6.2/eump-vitrina.min.js"></script>





        <script>
        if (window.EUMPConfig && window.EUMPConfig.plugins) {
            window.EUMPConfig.plugins.push('teleport');
        }
        </script>
                <script>
            if (window.EUMPConfig && window.EUMPConfig.pluginsOpts) {
                window.EUMPConfig.pluginsOpts.teleport = {
    "apiKey": "6a6b1b22ae31fb52",
    "dashApiKey": "6a6b1b22ae31fb52",
    "hlsApiKey": "42036852bb7fd522"
 }            }
        </script>
                <script>
        if (window.EUMPConfig && window.EUMPConfig.plugins) {
            window.EUMPConfig.plugins.push('remote');
        }
        </script>
                <script>
            if (window.EUMPConfig && window.EUMPConfig.pluginsOpts) {
                window.EUMPConfig.pluginsOpts.remote = {
    ignorePID: true,
    allowDomains: ["mediavitrina.ru","*.mediavitrina.ru","1tv.ru","*.1tv.ru","cm.1tv.ru","*.cm.1tv.ru","stage.1tv.ru","*.stage.1tv.ru","dev.1tv.ru","*.dev.1tv.ru","local.1tv.ru:4000","*.local.1tv.ru:4000"],
    controls: {
        use: true,
        mute: true,
        errors: false
    }
}            }
        </script>
        
<script>
    let adConfigJson = {
    "ad_positions": [
        {
            "type": "ad_position",
            "position": "preroll",
            "viewtime_sec": null,
            "ads": [
                {
                    "ads_engine": "yandex_sdk_adfox_creative",
                    "ads_server_url": null,
                    "yandex_ads_network_category": null,
                    "yandex_ads_owner_id": "364326",
                    "yandex_ads_partner_id": null,
                    "yandex_ads_network_params": {
                        "p1": "cmrht",
                        "p2": "gzac",
                        "puid1": "1tv_web",
                        "puid3": "{{uid}}",
                        "puid4": "{{contractor_category_id}}",
                        "puid5": "{{uid}}",
                        "puid6": "{{referer_domain}}",
                        "eid1": "{{sid}}"
                    }
                }
            ],
            "max_impressions": null
        },
        {
            "type": "ad_position",
            "position": "midroll",
            "viewtime_sec": null,
            "ads": [
                {
                    "ads_engine": "yandex_sdk_adfox_creative",
                    "ads_server_url": null,
                    "yandex_ads_network_category": null,
                    "yandex_ads_owner_id": "364326",
                    "yandex_ads_partner_id": null,
                    "yandex_ads_network_params": {
                        "p1": "cmrhy",
                        "p2": "gzac",
                        "puid1": "1tv_web",
                        "puid3": "{{uid}}",
                        "puid4": "{{contractor_category_id}}",
                        "puid5": "{{uid}}",
                        "puid6": "{{referer_domain}}",
                        "eid1": "{{sid}}"
                    }
                }
            ],
            "max_impressions": null
        }
    ]
};
    if (window.EUMP.device.is('mobile')) {
        adConfigJson = {
    "ad_positions": [
        {
            "type": "ad_position",
            "position": "preroll",
            "viewtime_sec": null,
            "ads": [
                {
                    "ads_engine": "yandex_sdk_adfox_creative",
                    "ads_server_url": null,
                    "yandex_ads_network_category": null,
                    "yandex_ads_owner_id": "364326",
                    "yandex_ads_partner_id": null,
                    "yandex_ads_network_params": {
                        "p1": "cmrhu",
                        "p2": "gzac",
                        "puid1": "1tv_web",
                        "puid3": "{{uid}}",
                        "puid4": "{{contractor_category_id}}",
                        "puid5": "{{uid}}",
                        "puid6": "{{referer_domain}}",
                        "eid1": "{{sid}}"
                    }
                }
            ],
            "max_impressions": null
        },
        {
            "type": "ad_position",
            "position": "midroll",
            "viewtime_sec": null,
            "ads": [
                {
                    "ads_engine": "yandex_sdk_adfox_creative",
                    "ads_server_url": null,
                    "yandex_ads_network_category": null,
                    "yandex_ads_owner_id": "364326",
                    "yandex_ads_partner_id": null,
                    "yandex_ads_network_params": {
                        "p1": "cmrhz",
                        "p2": "gzac",
                        "puid1": "1tv_web",
                        "puid3": "{{uid}}",
                        "puid4": "{{contractor_category_id}}",
                        "puid5": "{{uid}}",
                        "puid6": "{{referer_domain}}",
                        "eid1": "{{sid}}"
                    }
                }
            ],
            "max_impressions": null
        }
    ]
};
    }
</script>
<script>
    if (true) {
        window.EUMPConfig.plugins.push('tvis');
        window.EUMPConfig.pluginsOpts.tvis = {};
    }
</script>
<script>
    window.load_player_msec = Date.now();
    window.EUMP.i18nLang['ru']['Domain is not allowed'] = 'Размещение плеера на этом домене не разрешено<br/><br/><a href="http://spastv.ru/" target="_blank">Смотрите прямой эфир на сайте spastv.ru</a>';
    window.EUMP.i18nLang['ru']['Watch on site'] = '<a href="http://spastv.ru/" target="_blank">Смотрите прямой эфир на сайте spastv.ru</a>';

    let qualityDefinition = [
        {name: 'LQ', rate: [0, 499]}, //350
        {name: 'SD', rate: [500, 1999]}, //700
        {name: 'HQ', rate: [2000, 4999]}, //3000
        {name: 'HD', rate: [5000, 6999]}, //6000
        {name: 'FHD', rate: [7000, 10000]}, //8000
    ];
    
    let srcOrder = ['mpdp', 'hlsp', 'mpd', 'hls'];
    let srcFromQuery = window.EUMP.fw.queryParam('src');
    if (srcFromQuery) {
        srcOrder = [srcFromQuery];
    }
    
    initEUMPLivePlayer(
        '#player',
        {
            srcOrder: srcOrder,
            srcTypes: {
                mpdp: {
                    type: 'application/mpd+mp4',
                    live: true
                },
                hlsp: {
                    type: 'application/x-mpegURL',
                    live: true
                },
                mpd: {
                    type: 'application/mpd+mp4',
                    live: true
                },
                hls: {
                    type: 'application/x-mpegURL',
                    live: true
                }
            },
            start: 'visible',
            api: {
                protectionKey: {type: 'api'},
                drm: {
                    mpdp: [
                        {
                            type: 'com.widevine.alpha', 
                            serverURL: 'https://drm99502.nowdrm.co/widevine'
                        },
                        {
                            type: 'com.microsoft.playready',
                            serverURL: 'https://drm99502.nowdrm.co/playready/rightsmanager.asmx'
                        },
                    ],
                    hlsp: [
                        {
                            type: "com.apple.fps.1_0",
                            licenseURL: 'https://drm99502.nowdrm.co/fairplay',
                            certificateURL: 'https://staticmv.mediavitrina.ru/fairplay/1tv.der'
                        },
                    ]
                },
                sources: { url: 'https://media.mediavitrina.ru/api/v3/spas/playlist/spas_as_array.json?application_id={{APPLICATION_ID}}&player_referer_hostname={{PLAYER_REFERER_HOSTNAME}}&config_checksum_sha256={{CONFIG_CHECKSUM_SHA256}}&egress_version_id=1435899', type: "json" },
                sources_fallback: undefined,
                adverts: {
                    json: adConfigJson,
                    type: 'plain_json'
                }
            },
            protectionKey: 'disabled',
            intervals: {
                protectionKey: 0
            },
            poster: 'https://staticmv.mediavitrina.ru/vitrina_assets/v1.0.2/poster/spas_4x3_poster.png',
            allowedCountries: [],
            disallowedCountries: [],
            allowedDomains: ["mediavitrina.ru","*.mediavitrina.ru","1tv.ru","*.1tv.ru","cm.1tv.ru","*.cm.1tv.ru","stage.1tv.ru","*.stage.1tv.ru","dev.1tv.ru","*.dev.1tv.ru","local.1tv.ru:4000","*.local.1tv.ru:4000"],
            playerOpts: {
                initDelay: 500, // show vitrina logo
                loaderAppearanceDelay: 200, // must be less then initDelay
                assetsURL: window.EUMPAssetsURL,
                lang: 'ru',
                engines: ['html5shaka', 'html5p', 'html5hlsjs', 'html5', 'yandex_video_ads_sdk'],
                plugins: window.EUMPConfig.plugins,
                pluginsOpts: window.EUMPConfig.pluginsOpts,
                liveTimeOffset: -10800,
                enginesOpts: {
                    'html5hlsjs': {
                        sourceCycles: 2,
                        qualityDefinition: qualityDefinition,
                        enabledOnMobile: true,
                        enabledOnIOS: false,
                        hlsPlayerOpts: {
                            liveSyncDurationCount: 4,
                            liveMaxLatencyDurationCount: 8
                        },
                        captions: {enabled: false},
                        autoLevels: false,
                        playsinline: true,
                        nextLiveSourceOnEnded: true,
                        enableSeekLiveOnMobile: true,
                        liveTimeShift: 0,
                    },
                    'html5shaka': {
                        sourceCycles: 2,
                        dashClockSyncUri: 'https://media.mediavitrina.ru/current_unixtime',
                        bufferingMonitor: {
                            counterThreshold: 10
                        },
                        captions: {enabled: false},
                        qualityDefinition: qualityDefinition,
                        autoLevels: false,
                        enabledOnMobile: true,
                        playsinline: true,
                        errorCounterLimit: 2,
                        shakaPlayerOpts: {
                            abr: {
                                defaultBandwidthEstimate: 500000,
                                switchInterval: 5
                            },
                            streaming: {
                                bufferingGoal: 60,
                                bufferBehind: 40,
                                retryParameters: {maxAttempts: 2, timeout: 5500},
                                startAtSegmentBoundary: false,
                                ignoreTextStreamFailures: true,
                                jumpLargeGaps: true,
                                safeSeekOffset: 10
                            },
                            manifest: {
                                retryParameters: {maxAttempts: 2, timeout: 7500}
                            },
                            drm: {
                                retryParameters: {maxAttempts: 2, timeout: 5000}
                            }
                        },
                        liveTimeShift: 0,
                    },
                    'html5': {
                        sourceCycles: 2,
                        captions: {enabled: false},
                        useAndroidHLSFix: true,
                        playsinline: true,
                        liveTimeShift: 0,
                    },
                    html5p: {
                        playsinline: true,
                        liveTimeShift: 0,
                        licenseParamsHandler: function (message, session, engine) {
                            return JSON.stringify({content_id: 'skd://ccabf6bd-d4be-4827-b575-93c20c573858', spc_message: engine.base64EncodeUint8Array(message)});
                        }
                    }
                },
            }
        }
    );
</script>
</body>
</html>